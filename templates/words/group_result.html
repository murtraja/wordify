<!DOCTYPE html>
<html>

<head>
	<title>Group Results</title>
</head>

<body>

	<div id="placeholder" style="width:600px;height:300px"></div>
	<p id = 'msg'></p>
	<script language="javascript" type="text/javascript" src="../../static/js/jquery-2.1.4.js"></script>
	<script language="javascript" type="text/javascript" src="../../static/js/jquery.flot.js"></script>
	<script type="text/javascript">
		$(document).ready(function(){

			var jsondata = 
			{{jsondata|safe}};
			//{"data": [{"user": "san", "ans": [["advertisement", "", 0], ["attack", "", 0], ["afterthought", "", 0], ["attend", "", 0], ["acoustics", "", 0]]}, {"user": "mmr", "ans": [["advertisement", "", 0], ["attack", "", 0], ["afterthought", "", 0], ["attend", "", 0], ["acoustics", "", 0]]}]};
			var membercount = jsondata['data'].length;
			var wordcount = jsondata['data'][0]['ans'].length;
			console.log("received data with members:"+membercount+" and wordcount:"+wordcount);
			var data = jsondata['data']
			var user_list = []
			var totmarks_list = []
			for(i = 0; i<membercount; i++){
				user_list.push([i+1, data[i]['user']]);
				var sum = 0;
				for(j=0; j<wordcount; j++){
					sum = sum + data[i]['ans'][j][2];
				}
				totmarks_list.push([i+1,sum+1]);
			}
			console.log("totmarks_list:");
			console.log(totmarks_list);
			console.log('user_list:');
			console.log(user_list);
			var ticks_y=[]
			ticks_y.push([0,""]);
			for (i=1; i<=wordcount+2; i++)
			{
				ticks_y.push([i,(i-1).toString()]);
			}
			var options = {
				xaxis:{ticks:user_list}, 
                //max:5,
                yaxis:{ticks:ticks_y},
                grid:{hoverable:true, clickable:true},
                bars:{show:true, align:"center", barWidth : 1},

            };
            $.plot($('#placeholder'), [totmarks_list], options);


        });
</script>
</body>
</html>
